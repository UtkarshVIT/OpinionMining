Two Americans held as spies in Iran for more than two years have left prison on bail totalling $1m after Iraq and Oman mediated for their release.The Iranian judiciary confirmed on Wednesday that Shane Bauer and Josh Fattal, both 29, had been released only a month after a court sentenced each to eight years in jail for espionage and illegally crossing the border from Iraq into Iran. "Branch 36 of Tehran's appeals court has agreed to commute the detention sentences of the two US nationals to release on a bail of $500,000 [£324,000]," the judiciary said in a statement reported by Iran's state-run Press TV. The two men are reportedly preparing to return home to the US.A convoy of cars belonging to Swiss and Omani diplomats has been seen leaving Evin prison in Tehran with the two Americans believed to be inside. Iran's semi-official news agency Isna quoted the men's lawyer as saying they would head towards the city's airport.In July 2009 the men, along with their friend Sarah Shourd, were arrested by Iranian security forces after walking across an unmarked border from Iraqi Kurdistan.Shourd, 33, became engaged to Bauer while in jail, and was freed last September on health grounds after $500,000 was paid in a similar deal. Iran's judiciary has a history of asking for large sums as bail. For bailed prisoners who leave Iran, the payment is in effect buying their freedom.The men's lawyer, Masoud Shafiei, was accompanied by Swiss and Omani embassy officials on the journey to Evin to pick up his clients. The US does not have an embassy in Tehran, but the Swiss embassy hosts a US "interests section"."The case is over," he said before going inside the prison. "The court has ordered that they be freed on bail."The release comes after several days in which Shafiei attempted to secure the bail deal. It emerged last week that Iraq and Oman had also been involved in negotiations for the Americans' release. Top officials from both countries had reportedly been seen in Tehran for the talks. Isna said Oman had paid the bail money.A private jet from Oman was also reported to have arrived in Tehran in readiness to transfer the two men out of Iran – probably to the Gulf state – before their departure to the US. Shourd also flew to Oman after her release last year before going home to the US.The men's families who are in Muscat, the capital of Oman, described the day as as the "best day of their lives". In a statement, the families said they wanted to wrap them in their arms and make up for two lost years."Today can only be described as the best day of our lives," they said. "We have waited for nearly 26 months for this moment and the joy and relief we feel at Shane and Josh's long-awaited freedom knows no bounds. "We now all want nothing more than to wrap Shane and Josh in our arms, catch up on two lost years and make a new beginning, for them and for all of us.""For now, we especially would like to thank His Majesty Sultan Qaboos bin Said al-Said of Oman and his envoy Dr Salem al-Ismaily; our lawyer, Mr Masoud Shafii; and the Swiss ambassador to Iran, Livia Leu Agosti, and her colleagues, for working to make today a reality."They also expressed "deep gratitude" to the many others, including governments institutions and campaigners around the world."Their support for Shane, Josh, Sarah and our families has sustained us and comforted us throughout this time. Our appreciation for the warmth and love of our fellow human beings is unending and we know that Shane and Josh will always be grateful."Among those who had travelled to Oman to await the release of the hikers were Cindy Hickey and Al Bauer, Shane's mother and father, his sisters, Nicole Lindstrom and Shannon Bauer, Jacob and Laura Fattal, Josh's mother and father and his brother, Alex. Also present is Sarah Shourd, Shane's fiancee, who was detained with them and released in September 2010.Washington has denied that the two men were involved in espionage and says they unwittingly crossed the unmarked border while hiking, after stepping off a dirt track near a waterfall.Their release comes a week after Iran's president, Mahmoud Ahmadinejad, told two US media organisations that the men had been granted a "unilateral pardon". But the following day, the Iranian judiciary cast doubt on the release. Analysts interpreted the delay in the men's release as the latest episode in a power struggle between the president and conservatives close to Iran's supreme leader, Ayatollah Ali Khamenei. Ahmadinejad has suffered a series of setbacks in his confrontation with conservatives in recent months and is seen by many as a lame-duck president struggling to preserve his power before his term ends in 2013. Observers say the two Americans became victims of a feud between Ahmadinejad and his opponents. Some speculated that Iran kept the two in jail to use them as a means to put pressure on western powers, especially the US and its allies.It is not clear why Bauer and Fattal were finally released, but analysts say it may have been an attempt to reduce tensions with the international community at a time when negotiations over Iran's nuclear programme are deadlocked.In reaction their release, Amnesty International's deputy director for the Middle East and north Africa, Hassiba Hadj Sahraoui, said: "It is a welcome – if long overdue – step that the Iranian authorities have finally seen sense and released Shane Bauer and Josh Fattal. They must now be allowed to leave Iran promptly to be reunited with their families."She added: "All available evidence strongly suggests that the Iranian authorities have known all along that these men were not spies and should have been released. They should now release all prisoners of conscience held simply for peacefully expressing their views."