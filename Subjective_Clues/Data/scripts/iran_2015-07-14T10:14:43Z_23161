A comprehensive deal on Iran’s nuclear programme has been reached, bringing to an end a 12-year standoff that had threatened to trigger a new war in the Middle East, and potentially marking the beginning of a new era in relations between Iran and the west. Related: Iran nuclear talks: historic deal agreed in Vienna – live updates A formal announcement on the agreement was due to be made at a press conference in Vienna at midday (11am BST), after a final plenary meeting at 10.30am. At some point it is expected that the US president, Barack Obama, and his Iranian counterpart, Hassan Rouhani, will make statements from their capitals.The deal follows 17 days of almost uninterrupted negotiations in Vienna involving foreign ministers from seven countries – Iran, US, UK, Russia, China, France and Germany – and the EU’s foreign policy chief, Federica Mogherini.The talks only came to an end in the early hours of Tuesday morning, and diplomats stayed up through the night “scrubbing” the text, looking for mistakes and discrepancies. It is expected that the estimated 100 pages of text – including five annexes – that make up the agreement will be published in the next few days. The agreement will be made official when it becomes an attachment to a planned UN security council resolution later this month. However, the operative parts of the resolution, lifting sanctions, for example, will be suspended for a few months.Much of the outline of the agreement is already known, having been provisionally settled in Lausanne in April. It involves Iran accepting curbs on its nuclear programme in return for sanctions relief, but many of the critical, politically charged details will only be made public on Tuesday. It is understood that the conventional arms embargo will last another five years, and restrictions on ballistic missile technology will last eight years. Under a complicated arrangement, a violation could lead to the automatic “snap-back” of sanctions within 65 days, if a dispute-resolution process failed. The full agreement, known as the joint comprehensive plan of action, is likely to come under instant and ferocious attack from its opponents – mostly in the US, Iran and Israel – but its defenders portray it as one of the most important arms control accords of modern times and a rare diplomatic success in the Middle East.Iran’s foreign minister, Mohammad Javad Zarif, who has been leading his country’s delegation in Vienna, described the agreement as a “win-win” solution but not perfect. “I believe this is a historic moment,” he said. “We are reaching an agreement that is not perfect for anybody but is what we could accomplish. Today could have been the end of hope, but now we are starting a new chapter of hope.”Mogherini said the agreement would “open the way to a new chapter in international relations” and show that diplomacy can overcome decades of tension. “This is a sign of hope for the entire world,” she said. Israel’s prime minister, Binyamin Netanyahu, who has faced mounting criticism at home over his handling of the diplomacy around Iran, moved pre-emptively to denounce the deal even before the details had emerged. Related: Netanyahu denounces Iran nuclear deal but faces criticism from within Israel Heading a chorus of condemnation from Israeli politicians – many members of his rightwing coalition – he said the agreement was a capitulation and a mistake of historic proportions. The deal was also denounced by hardline former foreign minister Avigdor Lieberman as “a total surrender to terror”.Yair Lapid, head of the Yesh Atid party, said Netanyahu’s campaign over Iran had been a “colossal failure”. On Monday, the Iranian president’s office was forced to delete a premature tweet in his name that appeared to welcome a nuclear agreement that had yet to materialise.The deleted tweet on the English-language account under Rouhani’s name declared: “#IranDeal is the victory of diplomacy & mutual respect over the outdated paradigm of exclusion & coercion. And this is a good beginning.”Soon after, a new tweet was posted in its place, adding the word ‘if’ at the beginning.  Related: Iran nuclear talks: timeline As the Monday evening target came and went, Javad Zarif had appeared on the balcony of the Palais Coburg hotel in Vienna hotel, the venue for the talks, and faced shouted questions from the journalists in the street below. Asked how he was feeling, Zarif replied: “Sleepy and overworked.” Once an agreement is announced, it will not take effect for some time: it must first survive a trial by fire from its critics in Washington and Tehran.The greatest hurdle will be the US Congress, where Republicans have a majority and are expected to vote against the deal after a review period of up to 60 days. They will seek to win over 12 Democrats in an attempt to defeat a presidential veto.